<!doctype html>
<html class="dark">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>

  <script>
    function validateForm() {
      let gameName = document.getElementById('game-name').value;
      let childAge = document.getElementById('child-age').value;
      let id = document.getElementById('id').value;

      let url = `/title/${gameName}/${id}/${childAge}`;

      location.href = url;
      return false;
    }

    function validateSuggestionForm() {
      let childAge = document.getElementById('suggestion-child-age').value;

      let url = `/suggest/${childAge}`;

      location.href = url;
      return false;
    }
  </script>

</head>

<body>
  <div class="container mx-auto mt-16">

    <div class="relative overflow-hidden bg-white">
      <div class="pb-80 pt-16 sm:pb-40 sm:pt-24 lg:pb-48 lg:pt-40">
        <div class="relative mx-auto max-w-7xl px-4 sm:static sm:px-6 lg:px-8">

          <div class="flex items-center">
            <img class="h-14 w-auto" src="./images/Xbox_Logo.svg" alt="">
          </div>

          <div class="sm:max-w-lg">
            <h1 class="text-4xl font-bold tracking-tight text-gray-900 sm:text-6xl">Is this game safe for your child?
            </h1>
            <p class="mt-4 text-xl text-gray-500">Are you struggling to work out the age appropriate games for your
              child to play? Let us help you decide with this handy tool.</p>
          </div>
          <div>
            <div class="mt-10">
              <!-- Decorative image grid -->
              <div aria-hidden="true"
                class="pointer-events-none lg:absolute lg:inset-y-0 lg:mx-auto lg:w-full lg:max-w-7xl">
                <div
                  class="absolute transform sm:left-1/2 sm:top-0 sm:translate-x-8 lg:left-1/2 lg:top-1/2 lg:-translate-y-1/2 lg:translate-x-8">
                  <div class="flex items-center space-x-6 lg:space-x-8">
                    <div class="grid flex-shrink-0 grid-cols-1 gap-y-6 lg:gap-y-8">
                      <div class="h-64 w-44 overflow-hidden rounded-lg sm:opacity-0 lg:opacity-100">
                        <img src="./images/1.png" alt="" class="h-full w-full object-cover object-center">
                      </div>
                      <div class="h-64 w-44 overflow-hidden rounded-lg">
                        <img src="./images/2.png" alt="" class="h-full w-full object-cover object-center">
                      </div>
                    </div>
                    <div class="grid flex-shrink-0 grid-cols-1 gap-y-6 lg:gap-y-8">
                      <div class="h-64 w-44 overflow-hidden rounded-lg">
                        <img src="./images/3.png" alt="" class="h-full w-full object-cover object-bottom">
                      </div>
                      <div class="h-64 w-44 overflow-hidden rounded-lg">
                        <img src="./images/4.png" alt="" class="h-full w-full object-cover object-center">
                      </div>
                      <div class="h-64 w-44 overflow-hidden rounded-lg">
                        <img src="./images/5.png" alt="" class="h-full w-full object-cover object-center">
                      </div>
                    </div>
                    <div class="grid flex-shrink-0 grid-cols-1 gap-y-6 lg:gap-y-8">
                      <div class="h-64 w-44 overflow-hidden rounded-lg">
                        <img src="./images/6.png" alt="" class="h-full w-full object-cover object-center">
                      </div>
                      <div class="h-64 w-44 overflow-hidden rounded-lg">
                        <img src="./images/7.png" alt="" class="h-full w-full object-cover object-center">
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <a href="#"
                class="inline-block rounded-md border border-transparent bg-green-600 px-8 py-3 text-center font-medium text-white hover:bg-green-700"
                onclick="showSuggestionSearch()">Suggest some games</a>
              <a href="#"
                class="inline-block rounded-md border border-transparent bg-green-600 px-8 py-3 text-center font-medium text-white hover:bg-green-700"
                onclick="showNameSearch()">Search by games name</a>
            </div>

<!-- Name search -->
<form action="/title" method="get" onsubmit="return validateForm();" id="nameSearch" style="display: none;">
  <p class="mt-6 text-lg leading-8 text-gray-600">Enter the name of the game and the age of your child to
    determine whether or not it is safe.</p>
  <div class="mt-6 flex gap-x-4 " >
    <!-- Drop down Selector -->
    <div onclick="event.stopImmediatePropagation();">
      <label for="game-name" class="sr-only">Game Name</label>
      <input id="game-name" name="game-name" type="text" required
        class="px-5 py-3 border border-gray-300 rounded-md" placeholder="Game Name"
        onkeyup="onkeyUp(event)">
      <div id="dropdown"
        class="-60 border border-gray-300 rounded-md bg-white absolute overflow-y-auto hidden"></div>

      <input type="hidden" id="id" name="id" />
    </div>


    <label for="child-age" class="sr-only">Child Age</label>
    <input id="child-age" name="child-age" type="number" required
      class="px-5 py-3 border border-gray-300 rounded-md" placeholder="Child Age">

    <input type="submit"
      class="flex-none rounded-md bg-green-700 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-green-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-500"
      value="Check">
  </div>

</form>

<!-- Suggestion Search  -->
<form action="/suggest" method="get" onsubmit="return validateSuggestionForm();" id="suggestionSearch" style="display: none;">
  <p class="mt-6 text-lg leading-8 text-gray-600">Enter the age of your child to and we'll suggest appropriate games.</p>
  <div class="mt-6 flex gap-x-4 " >

    <label for="suggestion-child-age" class="sr-only">Child Age</label>
    <input id="suggestion-child-age" name="suggestion-child-age" type="number" required
      class="px-5 py-3 border border-gray-300 rounded-md" placeholder="Child Age">

    <input type="submit"
      class="flex-none rounded-md bg-slate-700 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-green-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-500"
      value="Suggest">
  </div>

</form>


          </div>
        </div>
      </div>
    </div>
  </div>

</body>

<script>
  let games = [
    { name: "Halo Infinite", code: "1" },
    { name: "Minecraft", code: "2" },
    { name: "Forza Horizon 5", code: "3" },
    { name: "Minecraft Legends", code: "4" },
    { name: "Grounded", code: "5" },
    { name: "Sea of Thieves", code: "6" },
    { name: "Microsoft Flight Simulator", code: "7" },
    { name: "Starfield", code: "8" },
  ];

  function onkeyUp(e) {
    let keyword = e.target.value;
    let dropdownEl = document.querySelector("#dropdown");
    dropdownEl.classList.remove("hidden");
    let filteredGames = games.filter((c) =>
      c.name.toLowerCase().includes(keyword.toLowerCase())
    );

    renderOptions(filteredGames);
  }

  document.addEventListener("DOMContentLoaded", () => {
    renderOptions(games);
  });

  function renderOptions(options) {
    let dropdownEl = document.querySelector("#dropdown");

    let newHtml = ``;

    options.forEach((country) => {
      newHtml += `<div
              onclick="selectOption('${country.name}', '${country.code}')"
              class="px-5 py-3 border-b border-gray-200 text-stone-600 cursor-pointer hover:bg-slate-100 transition-colors"
            >
              ${country.name}
            </div>`;
    });

    dropdownEl.innerHTML = newHtml;
  }

  function selectOption(countryName, countryCode) {
    hideDropdown();
    let input = document.querySelector("#game-name");
    input.value = countryName;

    let id = document.querySelector("#id");
    id.value = countryCode;

  }

  document.addEventListener("click", () => {
    hideDropdown();
  });

  function hideDropdown() {
    let dropdownEl = document.querySelector("#dropdown");
    dropdownEl.classList.add("hidden");
  }

  function showNameSearch() {
    let nameSearch = document.querySelector("#nameSearch");
    if (nameSearch.style.display === "none") {
      nameSearch.style.display = "block";
    } else {
      nameSearch.style.display = "none";
    }
  }

  function showSuggestionSearch() {
    let suggestionSearch = document.querySelector("#suggestionSearch");
    if (suggestionSearch.style.display === "none") {
      suggestionSearch.style.display = "block";
    } else {
      suggestionSearch.style.display = "none";
    }
  }

</script>

</html>